id: use-const
message: Prefer 'const' over 'global' if possible
severity: hint
language: spicy
rule:
  kind: "linkage"
  regex: "global"
  inside:
    kind: "var_decl"
    has:
      field: "init"
      kind: "expression"
      any:
        - has:
            kind: "bytes"
        - has:
            kind: "integer"

fix: "const"

note: |
  'const' variables can potentially be optimized better than 'global'
  variables, e.g., they could be inlined while access to a 'global' is always
  through an indirection.

  This role does not validate whether the 'global' is modified elsewhere so it
  can have FALSE POSITIVES.
